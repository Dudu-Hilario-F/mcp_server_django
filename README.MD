# MCP-Docs: Meu Co-piloto Pessoal para a Documenta√ß√£o do Django

<<<<<<< HEAD
Este √© o reposit√≥rio do **MCP-Docs**, um projeto que nasceu de uma necessidade pessoal e se tornou um campo de estudos sobre busca sem√¢ntica e a integra√ß√£o de ferramentas com Grandes Modelos de Linguagem (LLMs) como o Gemini.

O projeto est√° em desenvolvimento cont√≠nuo, e este documento reflete minha jornada de aprendizado, os desafios encontrados e os pr√≥ximos passos que pretendo dar.

## O Problema que me Propus a Resolver

Como desenvolvedor que utiliza Django, eu passava um tempo consider√°vel navegando pela documenta√ß√£o oficial. O uso do `Ctrl+F` era funcional, mas limitado: ele busca por palavras exatas, n√£o pelo *problema* ou *conceito* que eu queria entender. Isso me levava a pular de p√°gina em p√°gina em busca de um contexto que nem sempre era f√°cil de encontrar.

A minha meta era criar uma ferramenta que me permitisse "conversar" com a documenta√ß√£o, fazendo perguntas em linguagem natural e recebendo respostas diretas, precisas e contextualizadas.

## A Solu√ß√£o: Busca Sem√¢ntica com RAG (Retrieval-Augmented Generation)

Para resolver o problema, decidi construir um servidor intermedi√°rio que funciona como um assistente especializado para uma IA. Este servidor l√™, processa e armazena o conhecimento da documenta√ß√£o do Django, disponibilizando-o atrav√©s de uma API.

A grande virada t√©cnica do projeto √© n√£o depender apenas do conhecimento pr√©-treinado da IA, mas "aumentar" sua capacidade com informa√ß√µes espec√≠ficas e atualizadas.

### A Limita√ß√£o da IA sem o MCP-Docs: Busca Literal vs. Conhecimento Est√°tico

Uma IA como o Gemini, por si s√≥, possui um conhecimento vasto, mas "congelado no tempo" at√© a data do seu √∫ltimo treinamento.

* **Pesquisa sem MCP-Docs (Conhecimento Geral):** Se eu perguntar sobre uma funcionalidade do Django 5.2, a IA pode fornecer uma resposta baseada no Django 4.0, se essa for a vers√£o mais proeminente em seus dados de treino. Pior, ela pode tentar "adivinhar" uma resposta, resultando em uma "alucina√ß√£o" ‚Äì uma informa√ß√£o incorreta que pode custar horas de depura√ß√£o.

### O Poder da IA com o MCP-Docs: Busca Sem√¢ntica e Conhecimento Din√¢mico

O MCP-Docs implementa o padr√£o **RAG (Retrieval-Augmented Generation)**, transformando a IA de um "s√°bio com mem√≥ria antiga" para um "pesquisador com acesso a uma biblioteca atualizada".

* **Pesquisa com MCP-Docs (Gera√ß√£o Aumentada por Recupera√ß√£o):**
    1.  **Recupera√ß√£o (Retrieval):** Ao receber uma pergunta, a IA primeiro consulta a API do MCP-Docs.
    2.  **Busca Sem√¢ntica:** O MCP-Docs transforma a pergunta em um vetor e busca em sua base de dados (ChromaDB) os trechos da documenta√ß√£o que s√£o semanticamente mais similares, ou seja, que correspondem ao *significado* da pergunta.
    3.  **Gera√ß√£o (Generation):** A IA recebe esses trechos de texto atualizados e confi√°veis e os utiliza como base para formular uma resposta coesa, precisa e em linguagem natural.

O MCP-Docs n√£o concorre com a IA; ele a potencializa, fornecendo a mat√©ria-prima correta para que ela possa gerar a resposta perfeita.

### Porque Vetores e N√£o Texto Puro?

No cora√ß√£o da busca sem√¢ntica est√£o os **embeddings de vetores**. Quando o texto da documenta√ß√£o √© processado, ele √© transformado de palavras para vetores ‚Äî representa√ß√µes matem√°ticas que capturam o significado e o contexto.

* **Busca por Texto Puro:** Compara `string` com `string`. `ForeignKey` s√≥ encontra `ForeignKey`.
* **Busca por Vetores:** Compara significado com significado. Uma busca por "como conectar dois modelos" pode encontrar resultados sobre `ForeignKey`, `OneToOneField` e `ManyToManyField`, pois os vetores dessas palavras est√£o matematicamente pr√≥ximos no "espa√ßo de significado".

## Arquitetura e Tecnologias Utilizadas

* **Django e Django REST Framework (DRF):** Utilizados para construir o servidor, a estrutura do banco de dados relacional e a API que exp√µe os dados.
* **Requests & BeautifulSoup4:** Ferramentas para realizar o web scraping da documenta√ß√£o oficial do Django e extrair o conte√∫do textual das p√°ginas HTML.
* **Sentence-Transformers:** Biblioteca fundamental que transforma os trechos de texto em embeddings de vetores, permitindo a busca sem√¢ntica.
* **ChromaDB:** Banco de dados vetorial onde os embeddings s√£o armazenados e indexados, permitindo buscas por similaridade de forma extremamente eficiente.

## Como Executar o Projeto

1.  **Clone o reposit√≥rio:**
    ```bash
    git clone [https://github.com/Dudu-Hilario-F/mcp_server_django.git](https://github.com/Dudu-Hilario-F/mcp_server_django.git)
    cd mcp_server_django
=======
Bem-vindo ao reposit√≥rio do **MCP-Docs**, um sistema de busca inteligente para a documenta√ß√£o do Django, projetado para ser consumido por assistentes de IA como o Gemini.

A ideia nasceu de uma necessidade comum: a busca por solu√ß√µes na documenta√ß√£o oficial, que muitas vezes se torna uma ca√ßa manual e demorada com `Ctrl+F`. O MCP-Docs resolve isso implementando uma busca sem√¢ntica, que entende o *problema* por tr√°s da pergunta, em vez de apenas palavras-chave exatas.

O objetivo √© transformar a maneira como interagimos com a documenta√ß√£o, fornecendo respostas contextuais e diretas, e servindo como um caso de teste para a integra√ß√£o de ferramentas de IA no fluxo de trabalho de desenvolvimento.

## ü§î A Arquitetura: Gera√ß√£o Aumentada por Recupera√ß√£o (RAG)

O MCP-Docs n√£o √© apenas um motor de busca; ele √© uma implementa√ß√£o do padr√£o **RAG (Retrieval-Augmented Generation)**. Em vez de depender do conhecimento potencialmente desatualizado de um modelo de linguagem, n√≥s o "aumentamos" com informa√ß√µes precisas e atuais.

**O Problema:** Um LLM (Modelo de Linguagem Grande) como o Gemini possui um conhecimento vasto, mas congelado no tempo do seu √∫ltimo treinamento. Ele pode n√£o conhecer as funcionalidades da vers√£o mais recente do Django ou, pior, "alucinar" uma resposta incorreta, causando erros e perda de tempo.

**A Solu√ß√£o RAG:**
1.  **Recupera√ß√£o (Retrieval):** Quando uma pergunta sobre o Django √© feita, em vez de adivinhar, a IA usa a API do MCP-Docs. Nosso sistema busca em uma base de dados vetorial (ChromaDB), que cont√©m a documenta√ß√£o oficial previamente processada, e recupera os trechos mais relevantes para a pergunta.
2.  **Gera√ß√£o Aumentada (Augmented Generation):** Com esses trechos de informa√ß√£o confi√°vel e atualizada em m√£os, a IA gera uma resposta coesa, precisa e contextualizada.

O MCP-Docs atua como um assistente de pesquisa especializado, fornecendo os fatos, enquanto a IA usa sua intelig√™ncia para interpret√°-los e apresent√°-los de forma clara. √â a colabora√ß√£o perfeita entre uma base de conhecimento especializada e um racioc√≠nio avan√ßado.

## üöÄ Guia de Instala√ß√£o e Execu√ß√£o

Para executar o projeto localmente, siga os passos abaixo.

### 1. Pr√©-requisitos
- Python 3.10+
- Git

### 2. Instala√ß√£o

1.  **Clone o reposit√≥rio:**
    ```bash
    git clone [https://github.com/seu-usuario/seu-repositorio.git](https://github.com/seu-usuario/seu-repositorio.git)
    cd mcp-project
>>>>>>> 12b5bf7 (Fazendo melhorias no projeto: (fazendo testes, criando arquivos de logs, .env e melhorando o readme))
    ```

2.  **Crie e ative um ambiente virtual:**
    ```bash
<<<<<<< HEAD
    python -m venv venv
    # No Windows: venv\Scripts\activate
    # No Linux/macOS: source venv/bin/activate
=======
    # Cria o ambiente
    python -m venv mcp-env

    # Ativa o ambiente
    # Windows
    mcp-env\Scripts\activate
    # macOS/Linux
    source mcp-env/bin/activate
>>>>>>> 12b5bf7 (Fazendo melhorias no projeto: (fazendo testes, criando arquivos de logs, .env e melhorando o readme))
    ```

3.  **Instale as depend√™ncias** (√© uma boa pr√°tica criar um `requirements.txt`):
    ```bash
<<<<<<< HEAD
    pip install django djangorestframework requests beautifulsoup4 sentence-transformers chromadb
    ```

4.  **Aplique as migra√ß√µes do banco de dados:**
=======
    pip install -r requirements.txt
    ```

4.  **Configure as vari√°veis de ambiente:**
    Crie uma c√≥pia do arquivo `.env.example` e renomeie para `.env`. Este arquivo guardar√° suas configura√ß√µes locais.
    ```bash
    # No Windows (usando copy) ou Linux/macOS (usando cp)
    copy .env.example .env
    ```
    *O arquivo `.env` j√° vem com valores padr√£o para desenvolvimento. A `SECRET_KEY` √© gerada automaticamente se n√£o existir.*

5.  **Prepare o banco de dados:**
>>>>>>> 12b5bf7 (Fazendo melhorias no projeto: (fazendo testes, criando arquivos de logs, .env e melhorando o readme))
    ```bash
    python manage.py migrate
    ```

<<<<<<< HEAD
5.  **Inicie o servidor de desenvolvimento:**
    ```bash
    python manage.py runserver
    ```
    A API estar√° acess√≠vel em `http://127.0.0.1:8000/api/v1/search/`.

## Populando a Base de Conhecimento

Para que a busca funcione, √© preciso alimentar o banco de dados com a documenta√ß√£o do Django. Criei um comando customizado para isso.

O script √© inteligente: ele utiliza `update_or_create` (no Django) e `upsert` (no ChromaDB) para evitar duplicatas e permitir a atualiza√ß√£o de documentos j√° existentes.

* **Para popular com uma p√°gina espec√≠fica:**
    ```bash
    # Exemplo: python manage.py import_docs <VERS√ÉO> <CAMINHO_DA_P√ÅGINA>
    python manage.py import_docs 5.2 topics/db/models/
    ```

* **Para uma atualiza√ß√£o completa (ex: nova vers√£o do Django):**
    A abordagem mais segura √© limpar a base de dados antiga (apagar `db.sqlite3` e a pasta `chroma_db/`), rodar o `migrate` novamente e, ent√£o, re-popular tudo do zero com os novos comandos.

## Roadmap de Melhorias Futuras

Este projeto √© um campo de aprendizado. As pr√≥ximas melhorias que pretendo estudar e implementar s√£o:

- [ ] **Containeriza√ß√£o com Docker:** Criar um ambiente com `docker-compose` para encapsular a aplica√ß√£o Django e o banco de dados PostgreSQL, facilitando a configura√ß√£o e o deploy.
- [ ] **Aprimoramento do Parsing:** Substituir a extra√ß√£o de texto puro com `BeautifulSoup4` por uma convers√£o de **HTML para Markdown**. Isso preservar√° a estrutura sem√¢ntica do documento (t√≠tulos, listas, tabelas, blocos de c√≥digo), o que deve enriquecer a qualidade dos embeddings.
- [ ] **Mecanismo de Atualiza√ß√£o em Massa:** Desenvolver um script que possa monitorar o sitemap da documenta√ß√£o do Django e disparar atualiza√ß√µes autom√°ticas no banco de dados quando detectar mudan√ßas.
- [ ] **Evolu√ß√£o da API:** Adicionar mais funcionalidades √† API, como filtros por vers√£o do Django, pagina√ß√£o e a possibilidade de retornar metadados mais ricos sobre os documentos.
- [ ] **Otimiza√ß√£o do Banco de Dados Relacional:** Adicionar **√≠ndices** em campos-chave do modelo `DocumentChunk`, como nos t√≠tulos e URLs, para acelerar as consultas e filtros no banco de dados PostgreSQL.

## Desafios e Aprendizados

* **Instabilidade do Scraper:** O seletor de CSS que eu usava para encontrar o conte√∫do principal parou de funcionar ap√≥s uma mudan√ßa no site do Django. **Aprendizado:** A import√¢ncia de salvar o HTML localmente para depurar o scraper e a necessidade de construir seletores mais resilientes.
* **Cache de Bytecode (`__pycache__`):** Perdi um tempo consider√°vel depurando um erro que n√£o existia mais no c√≥digo. **Aprendizado:** O Python pode rodar vers√µes antigas de scripts em cache. Limpar as pastas `__pycache__` e reiniciar o terminal se tornou um passo padr√£o na solu√ß√£o de problemas "fantasmas".
* **Boas Pr√°ticas de Scraping:** Meu script foi inicialmente bloqueado. **Aprendizado:** A necessidade de "ser educado" com os servidores, adicionando um `User-Agent` ao cabe√ßalho da requisi√ß√£o para simular um navegador real.
=======
### 3. Alimentando a Base de Conhecimento

Para popular o banco de dados com a documenta√ß√£o do Django, use o comando `import_docs`.

```bash
# Exemplo: Importar a documenta√ß√£o sobre Models da vers√£o 5.2 do Django
python manage.py import_docs 5.2 topics/db/models/
```

O script ir√°:
- Fazer o download da p√°gina.
- Dividir o conte√∫do em se√ß√µes l√≥gicas.
- Salvar o texto no banco de dados relacional (SQLite).
- Gerar embeddings (vetores de significado) para cada se√ß√£o.
- Salvar os embeddings no banco de dados vetorial (ChromaDB).

O progresso e poss√≠veis erros s√£o registrados no arquivo `import_docs.log`.

### 4. Iniciando o Servidor

```bash
python manage.py runserver
```

A API estar√° dispon√≠vel em `http://127.0.0.1:8000/api/v1/search/`.

### 5. Executando os Testes

Para garantir que tudo est√° funcionando como esperado, rode a su√≠te de testes:
```bash
python manage.py test
```

## üõ†Ô∏è Boas Pr√°ticas e Pr√≥ximos Passos

Este projeto segue boas pr√°ticas de desenvolvimento para garantir qualidade e manutenibilidade.

-   **Gerenciamento de Depend√™ncias:** O arquivo `requirements.txt` garante que todos os desenvolvedores usem as mesmas vers√µes das bibliotecas, evitando o "funciona na minha m√°quina".
-   **Configura√ß√£o Segura:** O uso de vari√°veis de ambiente (`.env`) separa as configura√ß√µes sens√≠veis (como `SECRET_KEY`) do c√≥digo, uma pr√°tica de seguran√ßa essencial.
-   **Logging:** O comando de importa√ß√£o (`import_docs`) gera logs detalhados no arquivo `import_docs.log`, facilitando a depura√ß√£o e o monitoramento.
-   **Testes Automatizados:** Testes unit√°rios para a API (`apps/documentation/tests.py`) garantem que o endpoint principal funcione corretamente e evitam regress√µes.

### Pr√≥ximos Passos Sugeridos

-   **Automa√ß√£o de Atualiza√ß√£o:** Criar um novo comando que utilize o `sitemap.xml` da documenta√ß√£o do Django para descobrir e importar p√°ginas novas ou atualizadas automaticamente.
-   **Containeriza√ß√£o com Docker:** Criar um `Dockerfile` e um `docker-compose.yml` para simplificar o setup do ambiente de desenvolvimento e preparar o projeto para produ√ß√£o.
-   **CI/CD (Integra√ß√£o Cont√≠nua):** Configurar um workflow com GitHub Actions para rodar testes e linters automaticamente a cada push, garantindo a qualidade do c√≥digo.

## üîå Integra√ß√£o com uma IA (Ex: Gemini)

A API foi projetada para ser usada como uma **ferramenta** por um LLM. No seu cliente de IA, voc√™ deve registrar a seguinte ferramenta:

```json
{
  "name": "search_django_docs",
  "description": "Busca na documenta√ß√£o oficial do Django por trechos de texto que respondam a uma pergunta ou descrevam um conceito t√©cnico.",
  "parameters": {
    "type": "object",
    "properties": {
      "q": {
        "type": "string",
        "description": "A pergunta do usu√°rio ou o conceito a ser pesquisado. Deve ser uma frase completa para uma busca sem√¢ntica eficaz."
      }
    },
    "required": ["q"]
  }
}
```

Com a ferramenta registrada, o fluxo √© o seguinte:
1.  O usu√°rio faz uma pergunta t√©cnica sobre Django.
2.  A IA identifica que a ferramenta `search_django_docs` √© a mais adequada para responder.
3.  A IA chama a API do MCP-Docs com a pergunta do usu√°rio.
4.  O MCP-Docs retorna os trechos mais relevantes da documenta√ß√£o.
5.  A IA utiliza esses trechos para formular uma resposta final, precisa e baseada em fatos.
>>>>>>> 12b5bf7 (Fazendo melhorias no projeto: (fazendo testes, criando arquivos de logs, .env e melhorando o readme))
